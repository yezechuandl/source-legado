[
  {
    "bookSourceComment": "//2025.2.9 自动处理正文验证。◎夜泽川◎\n//2025.1.26 修复登录函数中与阅读内置变量冲突。◎夜泽川◎\n//2025.1.24 优化登录规则 ◎夜泽川◎\n//2024.7.26 ◎夜泽川◎\n//搜索和发现需要封面可复制规则到相应位置，因为封面是从详情取的，所以可能会导致加载变慢甚至超时，自行斟酌。↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓\na@href\n<js>\nul = source.key + result;\njava.ajax(ul);\n</js>\n[property$=image]@content",
    "bookSourceGroup": "零,自制",
    "bookSourceName": "爱丽丝书屋",
    "bookSourceType": 0,
    "bookSourceUrl": "https://alicesw.org",
    "bookUrlPattern": "https?://alicesw.org/novel/\\d+.html",
    "customOrder": 186,
    "enabled": true,
    "enabledCookieJar": true,
    "enabledExplore": true,
    "exploreUrl": "[{\"title\":\"排行榜\",\"url\":\"\",\"style\":{\"layout_flexBasisPercent\":1,\"layout_flexGrow\":1}},{\"title\":\"人气榜\",\"url\":\"https://alicesw.org/all/id/62/order/hits+desc.html?page={{page}}\",\"style\":{\"layout_flexBasisPercent\":0.25,\"layout_flexGrow\":1}},{\"title\":\"字数榜\",\"url\":\"https://alicesw.org/all/id/62/order/word+desc.html?page={{page}}\",\"style\":{\"layout_flexBasisPercent\":0.25,\"layout_flexGrow\":1}},{\"title\":\"推荐榜\",\"url\":\"https://alicesw.org/all/id/62/order/recommend+desc.html?page={{page}}\",\"style\":{\"layout_flexBasisPercent\":0.25,\"layout_flexGrow\":1}},{\"title\":\"全部分类\",\"url\":\"\",\"style\":{\"layout_flexBasisPercent\":1,\"layout_flexGrow\":1}},{\"title\":\"校园春色\",\"url\":\"/lists/61.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"东方玄幻\",\"url\":\"/lists/62.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"乡村爱情\",\"url\":\"/lists/63.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"都市激情\",\"url\":\"/lists/64.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"家庭乱伦\",\"url\":\"/lists/65.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"娱乐明星\",\"url\":\"/lists/72.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"历史架空\",\"url\":\"/lists/67.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"经典武侠\",\"url\":\"/lists/68.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"系统异能\",\"url\":\"/lists/69.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"穿越重生\",\"url\":\"/lists/70.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"科学幻想\",\"url\":\"/lists/71.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"同人改编\",\"url\":\"/lists/73.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"强奸轮奸\",\"url\":\"/lists/74.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"西方魔幻\",\"url\":\"/lists/75.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"贤者小说\",\"url\":\"/lists/76.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"堕落\",\"url\":\"/lists/18.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"反差\",\"url\":\"/lists/22.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"凌辱\",\"url\":\"/lists/46.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"纯爱\",\"url\":\"/lists/19.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"伪娘\",\"url\":\"/lists/52.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"性奴\",\"url\":\"/lists/45.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"萝莉\",\"url\":\"/lists/48.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"禁忌\",\"url\":\"/lists/51.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"熟女\",\"url\":\"/lists/56.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"NTR\",\"url\":\"/lists/54.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"媚黑\",\"url\":\"/lists/53.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"绿帽\",\"url\":\"/lists/55.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"调教\",\"url\":\"/lists/58.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"正太\",\"url\":\"/lists/50.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"女主\",\"url\":\"/lists/59.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"反转\",\"url\":\"/lists/23.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"下克上\",\"url\":\"/lists/43.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"羞耻\",\"url\":\"/lists/34.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"百合\",\"url\":\"/lists/47.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"重口\",\"url\":\"/lists/21.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"其他\",\"url\":\"/lists/57.html?page={{page}}\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}}]",
    "header": "{\"User-Agent\": \"Mozilla/5.0 (Linux; Android 9) Mobile Safari/537.36\"}",
    "jsLib": "nk = \"PGh0bWw+CjxoZWFkPgogICAgPG1ldGEgaHR0cC1lcXVpdj0icmVmcmVzaCIgY29udGVudD0iMDt1cmw9bGVnYWRvOi8vaW1wb3J0L1NvdXJjZT9zcmM9aHR0cHM6Ly9mYXN0bHkuanNkZWxpdnIubmV0L2doL3llemVjaHVhbmRsL3NvdXJjZS1sZWdhZG8vc291cmNlL+eIseS4veS4neS5puWxiy5qc29uIj4KICAgIDxzdHlsZT4KICAgICAgICAubm90aWNlLWJveCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7IC8qIOWQr+eUqEZsZXhib3jluIPlsYAgKi8KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGhlaWdodDogMTAwdmg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjBweDsKICAgICAgICB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGRpdiBjbGFzcz0ibm90aWNlLWJveCI+CiAgICAgICAgPHA+6Iul6Lez6L2s5pyq6Ieq5Yqo5omn6KGMPGJyPgogICAgICAgIDxhIGhyZWY9ImxlZ2FkbzovL2ltcG9ydC9Tb3VyY2U/c3JjPWh0dHBzOi8vZmFzdGx5LmpzZGVsaXZyLm5ldC9naC95ZXplY2h1YW5kbC9zb3VyY2UtbGVnYWRvL3NvdXJjZS/niLHkuL3kuJ3kuablsYsuanNvbiI+6K+35omL5Yqo54K55Ye75q2k5aSEPC9hPjwvcD4KICAgIDwvZGl2Pgo8L2JvZHk+CjwvaHRtbD4=\"\n\n//计算最终value值\nfunction getval(kk) {\n\t   const { java } = this\n    var val = \"\";\n    for (var i = 0; i <= kk.length - 1; i++) {\n        var str = kk.charAt(i);\n        var code = str.charCodeAt();\n        val += parseInt(code) + 1;\n    }\n    valu = java.md5Encode(val);\n    return valu;\n}",
    "lastUpdateTime": 1739091816289,
    "loginUi": "[   \n    {\n        \"name\": \"🏮更新书源🏮\",\n        \"type\": \"button\",\n        \"action\": \"update()\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 1\n        }\n    },\n    {\n        \"name\": \"用户名/邮箱\",\n        \"type\": \"text\"\n    },\n    {\n        \"name\": \"密码\",\n        \"type\": \"password\"\n    },\n    {\n        \"name\": \"注册\",\n        \"type\": \"button\",\n        \"action\": \"reg()\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.25\n        }\n    },\n    {\n        \"name\": \"登录\",\n        \"type\": \"button\",\n        \"action\": \"Login()\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.25\n        }\n    },\n    {\n        \"name\": \"登出\",\n        \"type\": \"button\",\n        \"action\": \"out()\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.25\n        }\n    },\n    {\n        \"name\": \"◀◎展示登录信息◎▶\",\n        \"type\": \"button\",\n        \"action\": \"show()\",\n        \"style\": {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 1\n        }\n    }\n]",
    "loginUrl": "ul = source.key;\nfunction reg() {\njava.startBrowser(\"https://alicesw.org/user/user/reg.html\",\"注册账号\");\n\t}\nfunction login() {}\nfunction Login() {\n\tcookie.removeCookie(ul);\n\tloginul = \"https://alicesw.org/user/user/login.html\"\n\tcodeul = \"https://alicesw.org/user/user/verify.html\"\n\t \n\tna = result['用户名/邮箱'];\n\tpa = result['密码']\n\tif (String(na&&pa)) {\n\tphpid = java.get(codeul,{}).header(\"set-cookies\");\n\tjava.log(phpid);\n\tcode = java.getVerificationCode(codeul);\n\tbody = `username=${na}&password=${pa}&code=${code}`\n cook = java.post(loginul,body,{\"x-requested-with\":\"XMLHttpRequest\",\"Cookie\": phpid });\nck = String(cook.cookies()).replace(/[{}]/g,\"\").replace(\",\",\";\");\n\tjava.log(String(ck))\n\theaders = JSON.stringify({\n\t\t       \"Cookie\": ck\n\t\t    });\n\t\tusercode = JSON.parse(cook.body()).msg\n\t\tjava.toast(usercode);\n\t\tif (ck) {\nsource.putLoginHeader(headers);\ncookie.replaceCookie(ul,ck);\n} else {\n\tsource.removeLoginHeader();\n\tcookie.removeCookie(ul)\n\t}\n\t    } else {\n\t\t\tjava.longToast(\"❌\\n未填入账号数据\\n请填入后点击上方√再点击登录按钮\");\n\t\t\t}\n}\nfunction out() {\n  source.removeLoginHeader();\n  cookie.removeCookie(ul);\njava.toast(\"已退出登录状态\");\n}\nfunction show() {\n\tjc = source.getLoginHeaderMap();\n\tif (jc) {\n\tinfo = jc.get(\"Cookie\").match(/%22%3A%22(\\d+?)%22%2C%22username%22%3A%22(.*?)%22%7D/)\n\tus = info[2];\n\tid = info[1];\n\tcodes = \"✔️已登录\";\n\t} else {\n\t\tus = \"无\";\n\tid = \"无\";\n\tcodes = \"❌未登录\";\n}\ntxt = `\\n◎用户：${us}◎\\n◎用户ID：${id}◎\\n◎登录状态：${codes}◎`\n\tjava.longToast(txt);\n}\nfunction update() {\n\tgg = nk\n\tjava.log(gg);\n\tjava.startBrowser('data:text/html;base64,'+gg,'更新');\n\t}",
    "respondTime": 180000,
    "ruleBookInfo": {
      "author": "@get:{a}",
      "coverUrl": "@get:{i}",
      "init": "@put:{n:\"[property$=book_name]@content\",\na:\"[property$=author]@content\",\nt:\"class.fix@p.2:3:4@text##.*[：:]\",\nk:\"class.tg@span@text##\\n##,\",\ni:\"[property$=image]@content\",\nl:\"[property$=latest_chapter_name]@content\",\nm:\"text.查看全部章节@href\",\no:\"[property$=description]@content\"}",
      "intro": "&nbsp;&nbsp;标签🏷️：@get:{k}\n📜简介：@get:{o}",
      "kind": "@get:{t}",
      "lastChapter": "@get:{l}",
      "name": "@get:{n}",
      "tocUrl": "@get:{m}"
    },
    "ruleContent": {
      "content": "<js>\nvar url = source.key\n//处理强制登录\nvar nn = String(cookie.getCookie(url));\nvar coks = nn.split('; '); \nckk = coks.filter(item => !item \n.startsWith(\"lf_reader_num\")).join('; ');\ncookie.setCookie(url,ckk);\n\n//自动处理验证\nlet text;\nif (src.includes(\"滑动验证\")) {\n   let headers = {\n        \"User-Agent\": \"Mozilla/5.0 (Linux; Android 9) Mobile Safari/537.36\",\n        \"Referer\": baseUrl\n    };\n    try {\n        let s = src.match(/src=\\\"(\\/huadong[^\"]+)/)[1];\n        let sr = java.get(source.key + s, headers).body().match(/(key=\\\".+?value=\\\"[^;]+?\\;)/)[1];\n        eval(sr);\n        let va = getval(value);\n        let codeul = url + `/a20be899_96a6_40b2_88ba_32f1f75f1552_yanzheng_huadong.php?type=ad82060c2e67cc7e2cc47552a4fc1242&key=${key}&value=${va}`;\n        let ck = java.get(codeul, headers);\n        java.log(\"验证Cookie\" + JSON.stringify(ck.cookies()));\n        java.toast(\"检测到验证,尝试自动处理……\");\n        let tx = java.ajax(baseUrl);\n        text = java.getString('#chapterContent@html', tx);\n    } catch (error) {\n        text = \"自动验证失败，请重试!\";\n    }\n} else {\n    text = java.getString('#chapterContent@html', src);\n}\ntext;\n</js>",
      "replaceRegex": "##{{chapter.title}}"
    },
    "ruleExplore": {
      "author": "span.-1@text",
      "bookList": "class.txt-list@li",
      "bookUrl": "a@href",
      "coverUrl": "",
      "kind": "span.0@a@span@text##\\[|\\]",
      "lastChapter": "",
      "name": "span.0@a@textNodes"
    },
    "ruleSearch": {
      "author": ".s4@text",
      "bookList": "class.txt-list@li!0",
      "bookUrl": "a@href",
      "coverUrl": "",
      "intro": "",
      "kind": ".s1@text##\\[|\\]",
      "lastChapter": "",
      "name": ".s2@text",
      "wordCount": ""
    },
    "ruleToc": {
      "chapterList": "class.section-list@a",
      "chapterName": "text",
      "chapterUrl": "href"
    },
    "searchUrl": "/search.html?keyword={{key}}&page={{page}}",
    "variableComment": "",
    "weight": 0
  }
]
